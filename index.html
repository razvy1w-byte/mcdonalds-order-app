<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />

<!-- iOS specific -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="NumeleSiteului">

<!-- PWA manifest -->
<link rel="manifest" href="/manifest.json">

<!-- Icon pentru ecranul principal -->
<link rel="apple-touch-icon" href="/icon-180.png">


  <title>McDelivery Mockup</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
   body { 
  background: #f1f5f9; 
  margin: 0; 
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  overflow: hidden;
  height: 100vh;
  height: 100dvh; /* noua unitate pentru mobile */

  /* Safe area pentru notch »ôi iPhone-uri moderne */
  padding-top: env(safe-area-inset-top);
  padding-right: env(safe-area-inset-right);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
}
    #root {
      width: 100%;
      height: 100vh;
      height: 100dvh;
    }
    /* AsigurƒÉ cƒÉ footer-ul e safe pentru mobile */
    .safe-area-inset-bottom {
      padding-bottom: env(safe-area-inset-bottom);
    }
    .custom-scroll::-webkit-scrollbar {
      width: 4px;
    }
    .custom-scroll::-webkit-scrollbar-track {
      background: #f1f5f9;
    }
    .custom-scroll::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 2px;
    }
    /* Anima»õii pentru popup */
    @keyframes slideUp {
      from { transform: translateY(100%); }
      to { transform: translateY(0); }
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .animate-slide-up {
      animation: slideUp 0.3s ease-out;
    }
    .animate-fade-in {
      animation: fadeIn 0.2s ease-out;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    function FoodieOrderPreview() {
      const [tip, setTip] = useState(0);
      const [notesOpen, setNotesOpen] = useState(false);
      const [orderNotes, setOrderNotes] = useState("");
      const [address, setAddress] = useState("21 Spring St, Apt 4B, New York, NY 10012");
      const [safeAreaBottom, setSafeAreaBottom] = useState('1rem');
      const [showOrderConfirmation, setShowOrderConfirmation] = useState(false);
      const [orderStatus, setOrderStatus] = useState(''); // 'placed', 'preparing', 'delivered'

      // CalculeazƒÉ spa»õiul safe pentru bara de navigare
      useEffect(() => {
        const calculateSafeArea = () => {
          // Pentru iOS »ôi browsere moderne
          const safeArea = 'env(safe-area-inset-bottom, 1rem)';
          setSafeAreaBottom(safeArea);
        };
        
        calculateSafeArea();
        window.addEventListener('resize', calculateSafeArea);
        return () => window.removeEventListener('resize', calculateSafeArea);
      }, []);

      // SimuleazƒÉ progresul comenzii
      useEffect(() => {
        if (orderStatus === 'placed') {
          const timer = setTimeout(() => setOrderStatus('preparing'), 2000);
          return () => clearTimeout(timer);
        }
        if (orderStatus === 'preparing') {
          const timer = setTimeout(() => setOrderStatus('delivered'), 3000);
          return () => clearTimeout(timer);
        }
      }, [orderStatus]);

      const items = [
        { 
          id: 1, 
          name: "Big Mac", 
          qty: 2, 
          price: 5.99, 
          image: "./images/big-mac.png" 
        },
        { 
          id: 2, 
          name: "Quarter Pounder with Cheese", 
          qty: 1, 
          price: 6.79, 
          image: "./images/quarter-pounder.png" 
        },
        { 
          id: 3, 
          name: "Large Fries", 
          qty: 2, 
          price: 3.49, 
          image: "./images/fries.png" 
        },
        { 
          id: 4, 
          name: "10pc Chicken McNuggets", 
          qty: 1, 
          price: 4.99, 
          image: "./images/nuggets.png" 
        },
        { 
          id: 5, 
          name: "Coke (Large)", 
          qty: 3, 
          price: 1.99, 
          image: "./images/coke.png" 
        },
        { 
          id: 6, 
          name: "Apple Pie", 
          qty: 2, 
          price: 1.59, 
          image: "./images/apple-pie.jpg" 
        },
      ];

      const itemsTotal = items.reduce((s, it) => s + it.price * it.qty, 0);
      const subtotal = +itemsTotal.toFixed(2);
      const discount = +(-(subtotal - 5.0)).toFixed(2); 
      const deliveryFee = 0.00;
      const tax = 0.00;
      const tipAmount = +tip.toFixed(2);
      const total = +(subtotal + discount + deliveryFee + tax + tipAmount).toFixed(2);

      const handlePlaceOrder = () => {
        setShowOrderConfirmation(true);
        setOrderStatus('placed');
      };

      const getStatusMessage = () => {
        switch(orderStatus) {
          case 'placed':
            return { 
              title: "Order placed!", 
              message: "Your order has been received by McDonald's",
              icon: "‚úÖ"
            };
          case 'preparing':
            return { 
              title: "Preparing your order", 
              message: "McDonald's is getting your food ready",
              icon: "üë®‚Äçüç≥"
            };
          case 'delivered':
            return { 
              title: "Order completed!", 
              message: "Your food has been delivered. Enjoy your meal!",
              icon: "üéâ"
            };
          default:
            return { 
              title: "Order placed!", 
              message: "Your order has been received",
              icon: "‚úÖ"
            };
        }
      };

      const status = getStatusMessage();

      return (
        <div className="w-full h-full max-w-[500px] mx-auto bg-white flex flex-col relative" style={{ height: '100dvh' }}>
          {/* Overlay pentru popup */}
          {showOrderConfirmation && (
            <div className="absolute inset-0 bg-black bg-opacity-50 z-50 animate-fade-in">
              {/* Popup de confirmare */}
              <div className="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl p-6 animate-slide-up">
                <div className="flex flex-col items-center text-center mb-6">
                  <div className="text-4xl mb-4">{status.icon}</div>
                  <h2 className="text-2xl font-bold text-gray-900 mb-2">{status.title}</h2>
                  <p className="text-gray-600 text-base">{status.message}</p>
                </div>

                {/* Detaliile comenzii */}
                <div className="border-t border-gray-200 pt-4 mb-6">
                  <div className="flex justify-between items-center mb-3">
                    <span className="text-gray-600">Estimated delivery</span>
                    <span className="font-semibold">25-35 min</span>
                  </div>
                  <div className="flex justify-between items-center mb-3">
                    <span className="text-gray-600">Order total</span>
                    <span className="font-bold text-lg">${total.toFixed(2)}</span>
                  </div>
                  <div className="flex justify-between items-center">
                    <span className="text-gray-600">Delivering to</span>
                    <span className="font-semibold text-right">{address.split(',')[0]}</span>
                  </div>
                </div>

                {/* Butoane */}
                <div className="space-y-3">
                  <button
                    className="w-full bg-black text-white py-4 rounded-xl font-semibold text-base"
                    onClick={() => {
                      if (orderStatus === 'delivered') {
                        setShowOrderConfirmation(false);
                        setOrderStatus('');
                      }
                    }}
                  >
                    {orderStatus === 'delivered' ? 'Close' : 'Track your order'}
                  </button>
                  
                  {orderStatus !== 'delivered' && (
                    <button
                      className="w-full bg-gray-100 text-gray-900 py-4 rounded-xl font-semibold text-base"
                      onClick={() => setShowOrderConfirmation(false)}
                    >
                      Continue browsing
                    </button>
                  )}
                </div>

                {/* Progress bar */}
                {orderStatus !== 'delivered' && (
                  <div className="mt-6">
                    <div className="flex justify-between text-sm text-gray-500 mb-2">
                      <span>Order placed</span>
                      <span>Preparing</span>
                      <span>Delivered</span>
                    </div>
                    <div className="w-full bg-gray-200 rounded-full h-2">
                      <div 
                        className="bg-green-500 h-2 rounded-full transition-all duration-500"
                        style={{ 
                          width: orderStatus === 'placed' ? '33%' : 
                                 orderStatus === 'preparing' ? '66%' : '100%' 
                        }}
                      ></div>
                    </div>
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Header */}
          <div className="p-4 bg-white border-b border-slate-200 flex-shrink-0">
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-3">
                <img
                  src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/McDonald%27s_Golden_Arches.svg/2339px-McDonald%27s_Golden_Arches.svg.png"
                  alt="McDonald's"
                  className="w-10 h-10 object-contain"
                />
                <div>
                  <div className="text-sm text-slate-500">Restaurant</div>
                  <div className="text-base font-semibold">McDonald's ‚Ä¢ 25‚Äì35 min</div>
                </div>
              </div>
              <div className="text-sm text-slate-500">üïí 12:02</div>
            </div>
          </div>

          {/* Content */}
          <div className="flex-1 overflow-auto custom-scroll">
            <div className="p-4 space-y-4 pb-32"> {/* MƒÉrit padding-bottom */}
              {/* Delivery Address */}
              <div className="bg-slate-50 p-4 rounded-xl border border-slate-200">
                <div className="flex items-start justify-between">
                  <div className="flex-1">
                    <div className="text-sm text-slate-500">Deliver to</div>
                    <div className="text-base font-semibold">{address}</div>
                    <div className="text-sm text-slate-500 mt-1">Leave at door ‚Ä¢ Apt 4B</div>
                  </div>
                  <button
                    className="text-red-600 text-base font-medium ml-4"
                    onClick={() => {
                      const newAddress = prompt("Enter an address (e.g.: 456 New St, New York, NY)", address);
                      if (newAddress) setAddress(newAddress);
                    }}
                  >
                    Change
                  </button>
                </div>
              </div>

              {/* Order Items */}
              <div className="bg-white p-4 rounded-xl border border-slate-200">
                <div className="flex items-center justify-between mb-4">
                  <div className="text-base font-semibold">Order Details</div>
                  <div className="text-sm text-slate-500">{items.length} items</div>
                </div>

                <div className="space-y-4">
                  {items.map((it) => (
                    <div key={it.id} className="flex items-start gap-4">
                      <img
                        src={it.image}
                        alt={it.name}
                        className="w-14 h-14 rounded-lg object-cover flex-shrink-0"
                      />
                      <div className="flex-1 min-w-0">
                        <div className="flex items-center justify-between">
                          <div className="font-medium text-base truncate">{it.name} <span className="text-slate-500">x{it.qty}</span></div>
                          <div className="font-semibold text-base ml-2">${(it.price * it.qty).toFixed(2)}</div>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>

                <div className="mt-4 border-t border-slate-200 pt-4 text-sm text-slate-500">
                  Have a promo code? Add it at checkout.
                </div>
              </div>

              {/* Delivery Instructions */}
              <div className="bg-white p-4 rounded-xl border border-slate-200">
                <div className="flex items-center justify-between">
                  <div>
                    <div className="text-base font-semibold">Delivery Instructions</div>
                    <div className="text-sm text-slate-500">e.g. Meet at lobby</div>
                  </div>
                  <button className="text-base text-red-600 font-medium" onClick={() => setNotesOpen(true)}>
                    Add
                  </button>
                </div>
                {notesOpen && (
                  <div className="mt-4">
                    <textarea
                      value={orderNotes}
                      onChange={(e) => setOrderNotes(e.target.value)}
                      placeholder="Instructions for the driver..."
                      className="w-full border border-slate-300 rounded-xl p-3 text-base"
                      rows="3"
                    />
                    <div className="flex justify-end mt-3">
                      <button 
                        className="px-4 py-2 rounded-xl bg-red-600 text-white text-base font-medium"
                        onClick={() => setNotesOpen(false)}
                      >
                        Save
                      </button>
                    </div>
                  </div>
                )}
                {orderNotes && !notesOpen && (
                  <div className="mt-3 text-sm text-slate-600 bg-slate-50 p-3 rounded-lg">
                    "{orderNotes}"
                  </div>
                )}
              </div>

              {/* Cost Breakdown */}
              <div className="bg-white p-4 rounded-xl border border-slate-200 space-y-3">
                <div className="flex items-center justify-between text-base">
                  <div>Subtotal</div>
                  <div className="font-medium">${subtotal.toFixed(2)}</div>
                </div>

                <div className="flex items-center justify-between text-base">
                  <div className="font-semibold text-red-600">Discount</div>
                  <div className="font-medium text-red-600">${discount.toFixed(2)}</div>
                </div>

                <div className="flex items-center justify-between text-base">
                  <div>Delivery fee</div>
                  <div>${deliveryFee.toFixed(2)}</div>
                </div>

                <div className="flex items-center justify-between text-base">
                  <div>Tax</div>
                  <div>${tax.toFixed(2)}</div>
                </div>

                <div>
                  <div className="text-base font-semibold mb-3">Tip</div>
                  <div className="flex items-center gap-2 flex-wrap">
                    {[0,1,2,3,5].map((val) => (
                      <button
                        key={val}
                        onClick={() => setTip(val)}
                        className={`px-4 py-2 rounded-full text-base border-2 ${
                          tip === val 
                            ? 'bg-red-600 text-white border-red-600' 
                            : 'text-slate-700 border-slate-300'
                        }`}
                      >
                        ${val}
                      </button>
                    ))}
                    <div className="flex-1 min-w-[120px]">
                      <div className="text-sm text-slate-500">Custom:</div>
                      <input 
                        type="number" 
                        value={tip} 
                        onChange={(e) => setTip(Number(e.target.value))} 
                        className="w-full p-2 text-base border border-slate-300 rounded-lg mt-1"
                      />
                    </div>
                  </div>
                </div>
              </div>

              {/* Payment */}
              <div className="bg-white p-4 rounded-xl border border-slate-200">
                <div className="flex items-center justify-between">
                  <div>
                    <div className="text-base font-semibold">Payment</div>
                    <div className="text-sm text-slate-500">Card ‚Ä¢ VISA ‚Ä¢ **** 4242</div>
                  </div>
                  <button className="text-base text-red-600 font-medium">Change</button>
                </div>
              </div>
            </div>
          </div>

          {/* Footer - cu safe area pentru mobile */}
          <div 
            className="bg-white p-4 border-t border-slate-200 flex-shrink-0 safe-area-inset-bottom"
            style={{ paddingBottom: `calc(1rem + ${safeAreaBottom})` }}
          >
            <div className="flex items-center justify-between mb-3">
              <div>
                <div className="text-sm text-slate-500">Estimated total</div>
                <div className="text-xl font-bold">${total.toFixed(2)}</div>
              </div>
              <div className="flex flex-col items-end">
                <button
                  className="bg-red-600 text-white px-6 py-3 rounded-xl font-semibold text-base shadow-lg active:bg-red-700"
                  onClick={handlePlaceOrder}
                >
                  Place order
                </button>
                <div className="text-xs text-slate-500 mt-2">Payment: Card ‚Ä¢ Delivery</div>
              </div>
            </div>
            <div className="text-sm text-slate-500">Estimated delivery: 25‚Äì35 min ‚Ä¢ McDonald's</div>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<FoodieOrderPreview />);
  </script>
</body>
</html>